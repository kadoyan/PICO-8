pico-8 cartridge // http://www.pico-8.com
version 32
__lua__
function _init()
	cls()
	ppr=0
	s,c,p=-1,0,0
end

function _update()
	if btn(0) then
	s,c,p=0,0,0
	end
	if btn(1) then
	s,c,p=1,0,0
	end
	if btn(2) then
	s,c,p=2,0,0
	end
	if btn(3) then
	s,c,p=3,0,1
	end
	if btn(4) then
	s,c,p=4,0,2
	end
end

function _draw()
	cls()
	csfx(s,c,p)
	local msg="sfx priority"
	?msg,63-#msg*2,40,12
	?"now playing:"..stat(16),10,51,7
	?"choosed sound:"..s.."(priority:"..p..")",10,58,7
end

function csfx(s,c,p)
	--s:sfx num
	--c:channel
	--p:priority
	--ppr:priority of prev sfx(global)
	if s!=nil then
		local n=stat(16+c)
		if n<0 then
			sfx(s,c)
		else
			if ppr<p then
				sfx(s,c)
			end
		end
		ppr=p
	end
end
__gfx__
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00077000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
00700700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
__sfx__
000600003f0503c05038050330502e050230501605013050110501005010050110501305016050190501c050200502305027050290502a0502a0502805027050230501f0501c05016050120500d0500805006050
00060000246501e6501d650216502a650356503a6502565016650166501e65024650246502165022650226501f6501c650186501665013650116500e6500c6500a65008650076500665006650066500765000000
000600003f750007003f750007003f750007003f750007002e750007003e7500070038750007003175000700297500070024750007001d750007001975000700137500070015750007001a75000700207503b750
0006000039150381503f1503f1503a15000100301500010000100381500010000100141500010000100221500010035150001002f150001001915000100001002515012150001003915000100201501315000100
200700000f5511355116551185511955118551115510b5510855106551075510b5510f551145511655116551155510f551085510655107551095510d5511055114551165511555114551115510b5510755107551
